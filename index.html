<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gloria â€” Valentineâ€™s ğŸ’˜</title>

<style>
:root{
  --bg1:#fff1f6;
  --bg2:#ffe4ef;
  --ink:#2a2438;
  --pink:#ff4d8d;
  --pink2:#ff79a8;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  display:grid;
  place-items:center;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  color:var(--ink);
  background:
    radial-gradient(1200px 800px at 20% 10%,var(--bg2),transparent 60%),
    radial-gradient(900px 700px at 80% 30%,#ffd1e3,transparent 55%),
    linear-gradient(135deg,var(--bg1),#fff);
  overflow-x:hidden;
  overflow-y:auto;
  padding:40px 0;
  -webkit-overflow-scrolling:touch;
}

.card{
  width:min(760px,92vw);
  background:#ffffffdd;
  border-radius:28px;
  padding:32px 28px;
  box-shadow:0 20px 60px rgba(0,0,0,.10);
  backdrop-filter:blur(10px);
  position:relative;
  z-index:1;
}

h1{text-align:center;font-size:clamp(30px,5vw,52px);margin:8px 0;}
p{text-align:center;font-size:clamp(15px,2.4vw,18px);margin:0 0 18px;}

.buttons{
  display:flex;
  gap:14px;
  justify-content:center;
  flex-wrap:wrap;
  min-height:90px;
}

button{
  border:0;
  border-radius:999px;
  padding:14px 22px;
  font-size:18px;
  font-weight:800;
  cursor:pointer;
  transition:transform .15s ease,box-shadow .15s ease;
}

#yesBtn{
  background:linear-gradient(135deg,var(--pink),var(--pink2));
  color:white;
  position:relative;
  z-index:2;
  box-shadow:0 14px 30px rgba(255,77,141,.35);
}

#noBtn{
  background:#fff;
  border:1px solid rgba(42,36,56,.12);
  position:relative;
  z-index:1;
}

.success{display:none;text-align:center;}
.optionArea{display:flex;flex-direction:column;gap:12px;align-items:center;margin-top:18px;}

.resultCard{
  margin:18px auto 0;
  width:min(560px,94%);
  background:#fff;
  border-radius:18px;
  padding:20px;
  box-shadow:0 12px 26px rgba(0,0,0,.07);
  animation:pop .3s ease-out;
}

@keyframes pop{from{transform:scale(.95);opacity:0}to{transform:scale(1);opacity:1}}

.confetti{
  position:fixed;
  inset:-10vh -10vw;
  pointer-events:none;
  overflow:hidden;
  display:none;
  z-index:2;
}

.confetti i{
  position:absolute;
  width:10px;
  height:16px;
  border-radius:2px;
  animation:fall 1.8s linear forwards;
}

@keyframes fall{
  to{transform:translateY(120vh) rotate(520deg);}
}

/* Bouquet animation */
@keyframes bouquetReveal {
  0% { transform: translateY(20px) rotate(-4deg) scale(.95); opacity: 0; }
  60% { transform: translateY(-4px) rotate(2deg) scale(1.02); opacity: 1; }
  100% { transform: translateY(0) rotate(0deg) scale(1); }
}

.bouquet-pop{
  animation: bouquetReveal .5s cubic-bezier(.22,1,.36,1);
}

/* Hover glow */
.bouquet-img{
  transition: transform .18s ease, box-shadow .18s ease;
}

@media (hover: hover) and (pointer: fine){
  .bouquet-img:hover{
    transform: translateY(-2px) scale(1.02);
    box-shadow: 0 18px 40px rgba(255,77,141,.25);
  }
}

/* Pulse */
@keyframes bouquetPulse{
  0%{transform:scale(1);}
  40%{transform:scale(1.05);}
  100%{transform:scale(1);}
}
.bouquet-pulse{animation: bouquetPulse .35s ease-out;}

/* Hearts */
.heart-trail{
  position:absolute;
  pointer-events:none;
  animation:floatHeart 1.8s ease-out forwards;
}

@keyframes floatHeart{
  0%{opacity:0;transform:translateY(0px) scale(.7) rotate(0deg);}
  20%{opacity:1;}
  100%{opacity:0;transform:translateY(-110px) scale(1.2) rotate(25deg);}
}

/* Screen glow */
#screenGlow{
  position:fixed;
  inset:0;
  background:radial-gradient(circle at center,
    rgba(255,77,141,.25) 0%,
    rgba(255,77,141,.15) 40%,
    transparent 70%);
  opacity:0;
  pointer-events:none;
  transition:opacity .5s ease;
  z-index:3;
}
.glow-active{opacity:1;}
</style>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
</head>

<body>

<div class="card" id="mainCard">
  <h1>Gloria, will you be my Valentine?</h1>
  <p>Itâ€™s me, <strong>Anthony</strong> â€” big question ahead ğŸ¥ºğŸ’˜</p>

  <div class="buttons">
    <button id="yesBtn">Yes ğŸ’–</button>
    <button id="noBtn">No ğŸ™ƒ</button>
  </div>
</div>

<div class="confetti" id="confetti"></div>

<audio id="bgMusic" loop>
  <source src="theme.mp3" type="audio/mpeg">
</audio>

<div class="card success" id="success">
  <h2>YAY â€” GLORIA SAID YES ğŸ˜ŒğŸ’–</h2>
  <p>Pick your Valentine reward:</p>
  <div class="optionArea" id="optionArea"></div>
  <div id="optionResult"></div>
  <div class="buttons" style="margin-top:24px;">
    <button id="restartBtn">Restart ğŸ”</button>
  </div>
</div>

<div id="screenGlow"></div>

<script>
const mainCard=document.getElementById('mainCard');
const yesBtn=document.getElementById('yesBtn');
const noBtn=document.getElementById('noBtn');
const success=document.getElementById('success');
const confetti=document.getElementById('confetti');
const optionArea=document.getElementById('optionArea');
const optionResult=document.getElementById('optionResult');
const restartBtn=document.getElementById('restartBtn');
const bgMusic=document.getElementById('bgMusic');

let musicStarted=false;
document.addEventListener('click',()=>{
  if(!musicStarted){
    musicStarted=true;
    bgMusic.volume=0;
    bgMusic.play().then(()=>{
      let v=0;
      const fade=setInterval(()=>{
        v+=0.05;
        if(v>=0.35){bgMusic.volume=0.35;clearInterval(fade);}
        else bgMusic.volume=v;
      },100);
    });
  }
});

const noTexts=["No ğŸ™ƒ","Are you sure? ğŸ˜­","Gloriaaa pls ğŸ¥º","Come on ğŸ’”","I told my mom ğŸ˜©"];
let noCount=0;

yesBtn.onclick=()=>{
  mainCard.style.display='none';
  success.style.display='block';
  launchConfetti();
  showOptions();
};

noBtn.onclick=(e)=>{
  e.preventDefault();
  noCount++;
  if(noCount<noTexts.length) noBtn.textContent=noTexts[noCount];
  yesBtn.style.transform=`scale(${Math.min(1+(noCount*.08),1.6)})`;
  noBtn.style.transform=`translate(${(Math.random()-.5)*8}px, ${(Math.random()-.5)*8}px)`;
};

function launchConfetti(cnt=120){
  confetti.innerHTML='';
  confetti.style.display='block';
  const cols=['#ff4d8d','#ff79a8','#ffd166','#9bf6ff','#bdb2ff','#caffbf'];
  for(let i=0;i<cnt;i++){
    const p=document.createElement('i');
    p.style.left=`${Math.random()*100}vw`;
    p.style.top=`${-10-Math.random()*20}vh`;
    p.style.background=cols[Math.floor(Math.random()*cols.length)];
    confetti.appendChild(p);
  }
  setTimeout(()=>confetti.style.display='none',2400);
}

function showOptions(){
  optionArea.innerHTML='';
  optionResult.innerHTML='';
  const opts=[
    {t:"ğŸŒ» Bouquet of Sunflowers & Lilies",a:showBouquet},
    {t:"ğŸ’Œ A Love Letter",a:()=>{optionResult.innerHTML=`<div class="resultCard"><h3>ğŸ’Œ To Gloria</h3><p>Gloria,<br><br>You make everything feel lighter, warmer, easier...<br><br>â€” Anthony ğŸ’–</p></div>`;}},
    {t:"ğŸµ QR to Song",a:showQR}
  ];
  opts.sort(()=>Math.random()-0.5);
  opts.forEach(o=>{const b=document.createElement('button');b.textContent=o.t;b.onclick=o.a;optionArea.appendChild(b);});
}

function showBouquet(){
  optionResult.innerHTML=`
  <div class="resultCard" style="position:relative;text-align:center;">
    <h3>Sunflowers & Lilies ğŸŒ»ğŸ¤</h3>
    <img id="bouquetImg" class="bouquet-pop bouquet-img"
      src="bouquet.png"
      style="width:100%;max-width:320px;border-radius:16px;margin:14px auto;display:block;">
    <p>Hand drawn just for you ğŸ’–</p>
  </div>`;

  const img=document.getElementById('bouquetImg');
  const glow=document.getElementById('screenGlow');

  img.addEventListener('pointerdown',(ev)=>{
    img.classList.remove("bouquet-pulse");
    void img.offsetWidth;
    img.classList.add("bouquet-pulse");

    glow.classList.add("glow-active");
    setTimeout(()=>glow.classList.remove("glow-active"),500);

    const rect=img.getBoundingClientRect();
    const x=ev.clientX-rect.left;
    const y=ev.clientY-rect.top;

    const hearts=["â¤ï¸","ğŸ’–","ğŸ’—"];
    const parent=img.parentElement;

    for(let i=0;i<8;i++){
      const h=document.createElement("span");
      h.className="heart-trail";
      h.textContent=hearts[Math.floor(Math.random()*hearts.length)];
      h.style.fontSize=`${14+Math.random()*10}px`;
      h.style.left=`${x+(Math.random()-.5)*24}px`;
      h.style.top=`${y+(Math.random()-.5)*24}px`;
      parent.appendChild(h);
      setTimeout(()=>h.remove(),1800);
    }
  });
}

function showQR(){
  const songURL="https://open.spotify.com/track/3HxpSe02QPSIQLDqT6Foj9?si=hhz1Om2kQCSIw_KqFQKMtg";
  optionResult.innerHTML=`<div class="resultCard">
    <h3>A little surprise for you ğŸ¶</h3>
    <div id="qrCode"></div>
    <button onclick="window.open('${songURL}','_blank')">Open It ğŸ’–</button>
  </div>`;
  new QRCode(document.getElementById("qrCode"),{text:songURL,width:200,height:200});
}

restartBtn.onclick=()=>{
  success.style.display='none';
  mainCard.style.display='block';
  noCount=0;
  noBtn.textContent="No ğŸ™ƒ";
  yesBtn.style.transform='scale(1)';
};
</script>

</body>
</html>